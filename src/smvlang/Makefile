SRC = smv_language.cpp smv_parser.cpp smv_typecheck.cpp expr2smv.cpp \
      smv_y.tab.cpp lex.yy.cpp smv_parse_tree.cpp

include $(CPROVER_DIR)/config.inc
include $(CPROVER_DIR)/common

INCLUDES= -I $(CPROVER_DIR) -I ..
CXXFLAGS += -D'LOCAL_IREP_IDS=<hw_cbmc_irep_ids.h>'

CLEANFILES = smvlang$(LIBEXT) y.tab.h y.tab.cpp lex.yy.cpp smv_y.tab.cpp.output smv_y.output

all: smvlang$(LIBEXT)

###############################################################################

smvlang$(LIBEXT): $(OBJ)
	$(LINKLIB)

smv_y.tab.cpp: parser.y
	$(YACC) $(YFLAGS) $$flags -pyysmv --defines=smv_y.tab.h -d parser.y -o $@

smv_y.tab.h: smv_y.tab.cpp

lex.yy.cpp: scanner.l
	$(LEX) -Pyysmv -olex.yy.cpp scanner.l

# extra dependencies
smv_y.tab$(OBJEXT): smv_y.tab.cpp smv_y.tab.h
lex.yy$(OBJEXT): smv_y.tab.cpp lex.yy.cpp smv_y.tab.h

